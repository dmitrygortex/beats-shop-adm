## 0. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –Ω—É–ª—è)

```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stop $(docker ps -a -q)
docker rm $(docker ps -a -q)
docker network prune -f

# –£–¥–∞–ª–∏—Ç—å volumes (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —á–∏—Å—Ç—ã–π —Å—Ç–∞—Ä—Ç)
docker volume rm beats-project_jenkins_home || true
```

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –Ω–∞ –Ω–æ–≤–æ–º –∫–æ–º–ø–µ)
```bash
git clone https://github.com/dmitrygortex/beats-shop-adm.git
cd beats-shop-adm
```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
docker compose -p beats-project up -d
```

–ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã, –ø–æ–∫–∞ –≤—Å—ë –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è.

### –ü–æ–ª—É—á–∏ –ø–∞—Ä–æ–ª—å –æ—Ç Jenkins
```bash
docker logs jenkins
```

–ò—â–∏ —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞:
```
*************************************************************
Jenkins initial admin password: a1b2c3d4e5f6...
*************************************************************
```

–°–∫–æ–ø–∏—Ä—É–π —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å.

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jenkins

### –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥
1. –û—Ç–∫—Ä–æ–π: `http://localhost:8089`
2. –í—Å—Ç–∞–≤—å –ø–∞—Ä–æ–ª—å –∏–∑ –ª–æ–≥–æ–≤
3. –ñ–º–∏ **Install suggested plugins** (–ø–æ–¥–æ–∂–¥–∏ 3-5 –º–∏–Ω—É—Ç)
4. –°–æ–∑–¥–∞–π –∞–¥–º–∏–Ω–∞ –∏–ª–∏ –∂–º–∏ **Skip and continue as admin**

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ credentials –¥–ª—è GitHub

1. **Manage Jenkins** ‚Üí **Credentials** ‚Üí **System** ‚Üí **Global credentials** ‚Üí **Add Credentials**
2. –ó–∞–ø–æ–ª–Ω–∏:
   - Kind: `Username with password`
   - Username: `dmitrygortex`
   - Password: —Ç–≤–æ–π **GitHub Personal Access Token** (—Å–æ–∑–¥–∞–π –≤ GitHub: Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Generate new token)
   - ID: `github-token` (—Ç–æ—á–Ω–æ —Ç–∞–∫!)
3. **Create**

### –°–æ–∑–¥–∞–Ω–∏–µ Pipeline Job

1. **New Item** ‚Üí –ò–º—è: `beats-shop-pipeline` ‚Üí **Pipeline** ‚Üí **OK**
2. –í–Ω–∏–∑—É –≤ —Å–µ–∫—Ü–∏–∏ **Pipeline**:
   - Definition: `Pipeline script` (–ù–ï from SCM!)
   - –í —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ –≤—Å—Ç–∞–≤—å:

```groovy
pipeline {
    agent any

    stages {
        stage('Clone') {
            steps {
                git credentialsId: 'github-token', 
                    url: 'https://github.com/dmitrygortex/beats-shop-adm.git', 
                    branch: 'main'
            }
        }

        stage('Build JAR') {
            steps {
                sh 'chmod +x gradlew'
                sh './gradlew clean bootJar'
            }
        }

        stage('Deploy') {
            steps {
                script {
                    sh 'docker compose -p beats-project stop beats-service || true'
                    sh 'docker rm -f beats-service || true'
                    sh 'docker compose -p beats-project up -d --build --no-deps beats-service'
                }
            }
        }

        stage('Health Check') {
            steps {
                sh 'sleep 15'
                sh 'curl -f http://beats-service:8080/api/beats/health || echo "Service starting..."'
            }
        }
    }

    post {
        success {
            echo '‚úÖ DEPLOYMENT SUCCESS!'
        }
        failure {
            echo '‚ùå Deployment failed!'
        }
    }
}
```

3. **Save**

## 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

### –ó–∞–ø—É—Å—Ç–∏ —Å–±–æ—Ä–∫—É
1. –í job `beats-shop-pipeline` –∂–º–∏ **Build Now**
2. –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç –¥–æ–ª–≥–æ (5-7 –º–∏–Ω—É—Ç) ‚Äî Gradle —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è
3. –î–æ–∂–¥–∏—Å—å –∑–µ–ª—ë–Ω–æ–≥–æ –±–∏–ª–¥–∞ ‚úÖ

### –ü—Ä–æ–≤–µ—Ä—å endpoints

**–°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```
http://localhost:18080/api/beats/health
```
–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `OK`

**Boss check:**
```
http://localhost:18080/api/beats/boss-check
```

**RabbitMQ Management:**
```
http://localhost:15672
```
–õ–æ–≥–∏–Ω: `guest` / –ü–∞—Ä–æ–ª—å: `guest`

**Prometheus Targets:**
```
http://localhost:9099/targets
```
–ü—Ä–æ–≤–µ—Ä—å: `beats-service` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **UP** (–∑–µ–ª—ë–Ω—ã–π)

**Prometheus –º–µ—Ç—Ä–∏–∫–∏ —Å–µ—Ä–≤–∏—Å–∞:**
```
http://localhost:18080/actuator/prometheus
```
–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫—É—á–∞ —Ç–µ–∫—Å—Ç–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana

### –í—Ö–æ–¥ –≤ Grafana
```
http://localhost:3009
```
–õ–æ–≥–∏–Ω: `admin` / –ü–∞—Ä–æ–ª—å: `admin`

### –î–æ–±–∞–≤–∏—Ç—å Prometheus Data Source
1. **Connections** ‚Üí **Data sources** ‚Üí **Add data source**
2. –í—ã–±–µ—Ä–∏ **Prometheus**
3. URL: `http://prometheus:9090`
4. **Save & Test** ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ‚úÖ –∑–µ–ª—ë–Ω–æ–µ "Data source is working"

### –ò–º–ø–æ—Ä—Ç Dashboard
1. **Dashboards** ‚Üí **New** ‚Üí **Import**
2. –í–≤–µ–¥–∏ ID: `11378` (Spring Boot Statistics)
3. –í—ã–±–µ—Ä–∏ Prometheus data source
4. **Import**

–¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω—ã –≥—Ä–∞—Ñ–∏–∫–∏: JVM Memory, HTTP Requests, CPU –∏ —Ç.–¥.

## 5. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞—á—ë—Ç–∞

### –ü–æ–∫–∞–∂–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

1. **–ò–∑–º–µ–Ω–∏ –∫–æ–¥** –≤ `BeatsController.java`:

```java
@GetMapping("/boss-check")
public ResponseEntity<String> bossCheck() {
    return ResponseEntity.ok("‚úÖ –ó–ê–ß–Å–¢ –°–î–ê–ù! " + java.time.Instant.now());
}
```

2. **–ó–∞–∫–æ–º–º–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å:**
```bash
git add .
git commit -m "demo –¥–ª—è –∑–∞—á—ë—Ç–∞"
git push
```

3. **–í Jenkins** ‚Üí `beats-shop-pipeline` ‚Üí **Build Now**

4. **–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏** –æ—Ç–∫—Ä–æ–π:
```
http://localhost:18080/api/beats/boss-check
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `‚úÖ –ó–ê–ß–Å–¢ –°–î–ê–ù! 2025-12-23T...`

### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–ø–æ–¥—É

1. ‚úÖ **Docker Compose** ‚Äî –≤—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
2. ‚úÖ **Docker Network** ‚Äî –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ `beats-project_beats-net`
3. ‚úÖ **RabbitMQ** ‚Äî UI —Å connections
4. ‚úÖ **Prometheus** ‚Äî targets UP, –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
5. ‚úÖ **Grafana** ‚Äî –¥–∞—à–±–æ—Ä–¥ —Å –∂–∏–≤—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
6. ‚úÖ **Jenkins CI/CD** ‚Äî –º–µ–Ω—è–µ—à—å –∫–æ–¥ ‚Üí Build Now ‚Üí –∞–≤—Ç–æ–¥–µ–ø–ª–æ–π
7. ‚úÖ **Volumes** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (`prometheus-data`, `grafana-data`, `jenkins_home`)

## 6. –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ

```bash
# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
docker ps

# –í—Å–µ –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏
docker network inspect beats-project_beats-net

# Volumes –µ—Å—Ç—å
docker volume ls | grep beats-project
```

**–í–°–Å –ì–û–¢–û–í–û –î–õ–Ø –ó–ê–ß–Å–¢–ê! üöÄ**